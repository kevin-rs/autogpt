name: ğŸ¦€ Build All Examples

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

env:
  CARGO_TERM_COLOR: always

jobs:
  build:
    name: ğŸ”§ Build Examples
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v5

      - name: ğŸ—ï¸ Build Example Crates
        run: |
          set -euxo pipefail
          echo "ğŸ” Searching for example crates..."
          failures=0
          for dir in examples/*; do
            if [ -d "$dir" ]; then
              echo "ğŸš§ Building crate in â¡ï¸ $dir"
              if ! (cd "$dir" && cargo build --release); then
                echo "âŒ Build failed in $dir"
                failures=$((failures+1))
              else
                echo "âœ… Success: $dir"
              fi
            fi
          done
          if [ $failures -ne 0 ]; then
            echo "ğŸš¨ $failures crate(s) failed to build!"
            exit 1
          else
            echo "ğŸ‰ All example crates built successfully!"
          fi
